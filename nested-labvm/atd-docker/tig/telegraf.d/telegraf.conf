[agent]
  ## Log at debug level.
  debug = true
  ## Log only error level messages.
  quiet = false
[[inputs.gnmi]]
  ## Address and port of the GNMI GRPC server for OpenConfig paths
  addresses = [
    "192.168.0.10:6030",
    "192.168.0.11:6030",
    "192.168.0.12:6030",
    "192.168.0.13:6030",
    "192.168.0.14:6030",
    "192.168.0.15:6030",
    "192.168.0.100:6030",
    "192.168.0.101:6030",
    "192.168.0.102:6030",
    "192.168.0.103:6030",
    "192.168.0.20:6030",
    "192.168.0.21:6030",
    "192.168.0.22:6030",
    "192.168.0.23:6030",
    "192.168.0.24:6030",
    "192.168.0.25:6030",
    "192.168.0.200:6030",
    "192.168.0.201:6030",
    "192.168.0.202:6030",
    "192.168.0.203:6030",
  ]

#   use_local_timestamp = true

  ## credentials
  username = "arista"
  password = "aristajfi9"

  ## redial in case of failures after
  redial = "30s"

  [[inputs.gnmi.subscription]]
    ## Name of the measurement
    name = "ifcounters"

    origin = "openconfig"
    path = "/interfaces/interface/state/counters"

    subscription_mode = "sample"
    sample_interval = "30s"

  [[inputs.gnmi.subscription]]
    ## Name of the measurement
    name = "openconfig_bgp"

    origin = "openconfig"
    path = "/network-instances/network-instance/protocols/protocol/bgp/"

    subscription_mode = "sample"
    sample_interval = "30s"

  [[inputs.gnmi.subscription]]
    ## Name of the measurement
    name = "cpu"
    origin = "eos_native"
    path = "/Kernel/proc/cpu/utilization"
    subscription_mode = "sample"
    sample_interval = "30s"

[[processors.enum]]
  [[processors.enum.mapping]]
    ## Name of the field to map
    field = "neighbors/neighbor/state/session_state"

    [processors.enum.mapping.value_mappings]
      IDLE = 1
      CONNECT = 2
      ACTIVE = 3
      OPENSENT = 4
      OPENCONFIRM = 5
      ESTABLISHED = 6

[[outputs.influxdb_v2]]
      urls = ["http://influxdb:8086"]
      token = "chancbb781ff57c68f312337d71382953f0027f2697759294b8868ae98e29df35161geme"
      timeout = "5s"
      organization = "arista"
      bucket = "arista"

